!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.trackgo={})}(this,function(e){"use strict";function r(e){return e?(e^16*Math.random()>>e/4).toString(16):String(-99990013e3).replace(/[018]/g,r)}var n=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,EventTarget),n(t,[{key:"emit",value:function(e,t){var n=new CustomEvent(e,t);this.dispatchEvent(n)}}]),t}();var b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function v(e,n){e.forEach(function(e){var t=!0;n(e,function(){return t=!1}),e.childTags&&t&&v(e.childTags,n)})}function h(e,t,n){for(;e.parent;){if(n(e=e.parent))return e;if(e===t)break}return null}t.default=function(t,e){{if(b.document)return!1;b.document=e.context||function(){for(var e=t;e.parent;)e=e.parent;return e}()}var n=Object.getPrototypeOf(b.document);Object.getOwnPropertyDescriptor(n,"childTags")||Object.defineProperty(n,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(e){return"tag"===e.type||"script"===e.type||"style"===e.type})}});Object.getOwnPropertyDescriptor(n,"attributes")||Object.defineProperty(n,"attributes",{enumerable:!0,get:function(){var r=this.attribs,e=Object.keys(r),t=e.reduce(function(e,t,n){return e[n]={name:t,value:r[t]},e},{});return Object.defineProperty(t,"length",{enumerable:!1,configurable:!1,value:e.length}),t}});n.getAttribute||(n.getAttribute=function(e){return this.attribs[e]||null});n.getElementsByTagName||(n.getElementsByTagName=function(t){var n=[];return v(this.childTags,function(e){e.name!==t&&"*"!==t||n.push(e)}),n});n.getElementsByClassName||(n.getElementsByClassName=function(e){var n=e.trim().replace(/\s+/g," ").split(" "),r=[];return v([this],function(e){var t=e.attribs.class;t&&n.every(function(e){return-1<t.indexOf(e)})&&r.push(e)}),r});n.querySelectorAll||(n.querySelectorAll=function(e){var n=this;e=e.replace(/(>)(\S)/g,"$1 $2").trim();var r=e.split(" ").reverse().map(function(e,t){var u=0===t,n=e.split(":"),r=d(n,2),c=r[0],o=r[1],a=null,l=null;if(function(){switch(!0){case/>/.test(c):l=function(t){return function(e){return e(t.parent)&&t.parent}};break;case/^\./.test(c):var n=c.substr(1).split(".");a=function(e){var t=e.attribs.class;return t&&n.every(function(e){return-1<t.indexOf(e)})},l=function(e,t){return u?e.getElementsByClassName(n.join(" ")):"function"==typeof e?e(a):h(e,t,a)};break;case/^\[/.test(c):var e=c.replace(/\[|\]|"/g,"").split("="),t=d(e,2),r=t[0],o=t[1];a=function(e){var t=-1<Object.keys(e.attribs).indexOf(r);return!(!t||o&&e.attribs[r]!==o)},l=function(e,t){if(u){var n=(r=[],v([e],function(e){a(e)&&r.push(e)}),{v:r});if("object"===(void 0===n?"undefined":y(n)))return n.v}var r;return"function"==typeof e?e(a):h(e,t,a)};break;case/^#/.test(c):var i=c.substr(1);a=function(e){return e.attribs.id===i},l=function(e,t){if(u){var n=(r=[],v([e],function(e,t){a(e)&&(r.push(e),t())}),{v:r});if("object"===(void 0===n?"undefined":y(n)))return n.v}var r;return"function"==typeof e?e(a):h(e,t,a)};break;case/\*/.test(c):a=function(e){return!0},l=function(e,t){if(u){var n=(r=[],v([e],function(e){return r.push(e)}),{v:r});if("object"===(void 0===n?"undefined":y(n)))return n.v}var r;return"function"==typeof e?e(a):h(e,t,a)};break;default:a=function(e){return e.name===c},l=function(e,t){if(u){var n=(r=[],v([e],function(e){a(e)&&r.push(e)}),{v:r});if("object"===(void 0===n?"undefined":y(n)))return n.v}var r;return"function"==typeof e?e(a):h(e,t,a)}}}(),!o)return l;var i=o.match(/-(child|type)\((\d+)\)$/),f=i[1],s=parseInt(i[2],10)-1,p=function(t){if(t){var e=t.parent.childTags;"type"===f&&(e=e.filter(a));var n=e.findIndex(function(e){return e===t});if(n===s)return!0}return!1};return function(e){var t=l(e);return u?t.reduce(function(e,t){return p(t)&&e.push(t),e},[]):p(t)&&t}}),t=r.shift(),o=r.length;return t(this).filter(function(e){for(var t=0;t<o;){if(!(e=r[t](e,n)))return!1;t+=1}return!0})});n.contains||(n.contains=function(n){var r=!1;return v([this],function(e,t){e===n&&(r=!0,t())}),r});return!0},e.exports=t.default});o(f);var _=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertNodeList=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n},t.escapeValue=function(e){return e&&e.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&").replace(/\n/g,"A")}});o(_);_.convertNodeList,_.escapeValue;var s=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.root,r=void 0===n?document:n,o=t.skip,i=void 0===o?null:o,u=t.priority,c=void 0===u?["id","class","href","src"]:u,a=t.ignore,l=void 0===a?{}:a,f=[],s=e,p=f.length,y=!1,d=i&&(Array.isArray(i)?i:[i]).map(function(t){return"function"!=typeof t?function(e){return e===t}:t}),v=function(t){return i&&d.some(function(e){return e(t)})};Object.keys(l).forEach(function(e){"class"===e&&(y=!0);var n=l[e];"function"!=typeof n&&("number"==typeof n&&(n=n.toString()),"string"==typeof n&&(n=new RegExp((0,_.escapeValue)(n).replace(/\\/g,"\\\\"))),"boolean"==typeof n&&(n=n?/(?:)/:/.^/),l[e]=function(e,t){return n.test(t)})}),y&&(h=l.attribute,l.attribute=function(e,t,n){return l.class(t)||h&&h(e,t,n)});var h;for(;s!==r;){if(!0!==v(s)){if(g(c,s,l,f,r))break;if(m(s,l,f,r))break;g(c,s,l,f),f.length===p&&m(s,l,f),f.length===p&&w(c,s,l,f)}s=s.parentNode,p=f.length}if(s===r){var b=O(c,s,l);f.unshift(b)}return f.join(" ")};var p={attribute:function(e){return-1<["style","data-reactid","data-react-checksum"].indexOf(e)}};function g(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:t.parentNode,i=u(e,t,n);if(i&&1===o.querySelectorAll(i).length)return r.unshift(i),!0;return!1}function u(o,e,t){for(var i=e.attributes,n=Object.keys(i).sort(function(e,t){var n=o.indexOf(i[e].name),r=o.indexOf(i[t].name);return-1===r?-1===n?0:-1:n-r}),r=0,u=n.length;r<u;r++){var c=n[r],a=i[c],l=a.name,f=(0,_.escapeValue)(a.value);if(!y(t[l]||t.attribute,l,f,p[l]||p.attribute)){var s="["+l+'="'+f+'"]';if(!1===/\b\d/.test(f))if("id"===l&&(s="#"+f),"class"===l)s="."+f.trim().replace(/\s+/g,".");return s}}return null}function m(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.parentNode,o=i(e,t);if(o&&1===r.getElementsByTagName(o).length)return n.unshift(o),!0;return!1}function i(e,t){var n=e.tagName.toLowerCase();return y(t.tag,null,n)?null:n}function w(e,t,n,r){for(var o=t.parentNode,i=o.childTags||o.children,u=0,c=i.length;u<c;u++){var a=i[u];if(a===t){var l=O(e,a,n);if(!l)return console.warn("\n          Element couldn't be matched through strict ignore pattern!\n        ",a,n,l);var f="> "+l+":nth-child("+(u+1)+")";return r.unshift(f),!0}}return!1}function O(e,t,n){var r=u(e,t,n);return r||(r=i(t,n)),r}function y(e,t,n,r){if(!n)return!0;var o=e||r;return!!o&&o(t,n,r)}e.exports=t.default});o(s);var p=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=t.length?(0,_.convertNodeList)(t):[t]);if(!t.length||t.some(function(e){return 1!==e.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var r=(0,s.default)(t[0],n),o=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(o.length<2)return p("",e,"",t);var i=[o.pop()];for(;1<o.length;){var u=o.pop(),c=o.join(" "),a=i.join(" "),l=c+" "+a,f=document.querySelectorAll(l);f.length!==t.length&&i.unshift(p(c,u,a,t))}i.unshift(o[0]),(o=i)[0]=p("",o[0],o.slice(1).join(" "),t),o[o.length-1]=p(o.slice(0,-1).join(" "),o[o.length-1],"",t),r&&delete b.document;return o.join(" ").replace(/>/g,"> ").trim()};var n,s=(n=f)&&n.__esModule?n:{default:n};function p(n,r,o,i){if(n.length&&(n+=" "),o.length&&(o=" "+o),/\[*\]/.test(r)){var e=r.replace(/=.*$/,"]"),u=""+n+e+o;if(h(document.querySelectorAll(u),i))r=e;else for(var c=document.querySelectorAll(""+n+e),t=function(){var t=c[a];if(i.some(function(e){return t.contains(e)})){var e=t.tagName.toLowerCase();return u=""+n+e+o,h(document.querySelectorAll(u),i)&&(r=e),"break"}},a=0,l=c.length;a<l;a++){if("break"===t())break}}if(/>/.test(r)){var f=r.replace(/>/,"");u=""+n+f+o;h(document.querySelectorAll(u),i)&&(r=f)}if(/:nth-child/.test(r)){var s=r.replace(/nth-child/g,"nth-of-type");u=""+n+s+o;h(document.querySelectorAll(u),i)&&(r=s)}if(/\.\S+\.\S+/.test(r)){for(var p=r.trim().split(".").slice(1).map(function(e){return"."+e}).sort(function(e,t){return e.length-t.length});p.length;){var y=r.replace(p.shift(),"").trim();if(!(u=(""+n+y+o).trim()).length||">"===u.charAt(0)||">"===u.charAt(u.length-1))break;h(document.querySelectorAll(u),i)&&(r=y)}if((p=r&&r.match(/\./g))&&2<p.length){var d=document.querySelectorAll(""+n+r),v=function(){var t=d[a];if(i.some(function(e){return t.contains(e)})){var e=t.tagName.toLowerCase();return u=""+n+e+o,h(document.querySelectorAll(u),i)&&(r=e),"break"}};for(a=0,l=d.length;a<l;a++){if("break"===v())break}}}return r}function h(n,e){var r=n.length;return r===e.length&&e.every(function(e){for(var t=0;t<r;t++)if(n[t]===e)return!0;return!1})}e.exports=t.default});o(p);var y=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).root,r=void 0===t?document:t,o=[];e.forEach(function(e,t){for(var n=[];e!==r;)e=e.parentNode,n.unshift(e);o[t]=n}),o.sort(function(e,t){return e.length-t.length});for(var n=o.shift(),i=null,u=function(){var t=n[c],e=o.some(function(e){return!e.some(function(e){return e===t})});if(e)return"break";i=t},c=0,a=n.length;c<a;c++){var l=u();if("break"===l)break}return i},t.getCommonProperties=function(e){var f={classes:[],attributes:{},tag:null};return e.forEach(function(e){var o,r,t,n,i=f.classes,u=f.attributes,c=f.tag;if(void 0!==i){var a=e.getAttribute("class");a?(a=a.trim().split(" "),i.length?(i=i.filter(function(t){return a.some(function(e){return e===t})})).length?f.classes=i:delete f.classes:f.classes=a):delete f.classes}if(void 0!==u&&(o=e.attributes,r=Object.keys(o).reduce(function(e,t){var n=o[t],r=n.name;return n&&"class"!==r&&(e[r]=n.value),e},{}),t=Object.keys(r),n=Object.keys(u),t.length?n.length?(u=n.reduce(function(e,t){var n=u[t];return n===r[t]&&(e[t]=n),e},{}),Object.keys(u).length?f.attributes=u:delete f.attributes):f.attributes=r:delete f.attributes),void 0!==c){var l=e.tagName.toLowerCase();c?l!==c&&delete f.tag:f.tag=l}}),f}});o(y);y.getCommonAncestor,y.getCommonProperties;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"===d(Symbol.iterator)?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":d(e)};t.getSingleSelector=l,t.getMultiSelector=r,t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e.length&&!e.name)return r(e,t);return l(e,t)};var c=n(f),u=n(s),a=n(p);function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+(void 0===e?"undefined":i(e))+'")');var n=(0,c.default)(e,t),r=(0,u.default)(e,t),o=(0,a.default)(r,e,t);return n&&delete b.document,o}function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=(0,_.convertNodeList)(e)),e.some(function(e){return 1!==e.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var n=(0,c.default)(e[0],t),r=l((0,y.getCommonAncestor)(e,t),t),o=function(e){var t=(0,y.getCommonProperties)(e),n=t.classes,r=t.attributes,o=t.tag,i=[];o&&i.push(o);if(n){var u=n.map(function(e){return"."+e}).join("");i.push(u)}if(r){var c=Object.keys(r).reduce(function(e,t){return e.push("["+t+'="'+r[t]+'"]'),e},[]).join("");i.push(c)}return[i.join("")]}(e)[0],i=(0,a.default)(r+" "+o,e,t),u=(0,_.convertNodeList)(document.querySelectorAll(i));return e.every(function(t){return u.some(function(e){return e===t})})?(n&&delete b.document,i):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",e)}});o(c);c.getSingleSelector,c.getMultiSelector;var a=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.common=t.optimize=t.getMultiSelector=t.getSingleSelector=t.select=void 0,Object.defineProperty(t,"getSingleSelector",{enumerable:!0,get:function(){return c.getSingleSelector}}),Object.defineProperty(t,"getMultiSelector",{enumerable:!0,get:function(){return c.getMultiSelector}});var n=i(c),r=i(p),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(y);function i(e){return e&&e.__esModule?e:{default:e}}t.select=n.default,t.optimize=r.default,t.common=o,t.default=n.default});o(a);a.common,a.optimize,a.getMultiSelector,a.getSingleSelector;var l,v,h=a.select;(v=l||(l={})).view="view",v.click="click",v.error="error";var g=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uuid=r(),this.st=new Date,this.path=t.path||"",this.refer=t.refer||""};var m=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.type=l.click,t.selector=e.selector,t.screenX=e.screenX,t.screenY=e.screenY,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,g),n}();var w=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.type=l.view,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,g),n}(),O=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function j(){var e=window;return{path:e.location.pathname,refer:e.document.referrer}}var E=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return Array.isArray(e)||(e=[e]),t.types=e,t.isCollecting=!1,t.listeners={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),O(r,[{key:"isInclude",value:function(e){return this.types.includes(e)}},{key:"notify",value:function(e,t){var n={type:e,event:t};this.emit(r.COLLECT_EVENT_NAME,n)}},{key:"startCollector",value:function(){var o=this,e=!!window;if(this.isInclude(l.click)&&e&&(this.listeners[l.click]=function(e){var t,n,r=(n={selector:h((t=e).target),screenX:t.screenX,screenY:t.screenY},n=Object.assign(n,j()),new m(n));o.notify(l.click,r)},document.addEventListener("click",this.listeners[l.click])),this.isInclude(l.view)&&e){var t=new w(j());this.notify(l.view,t)}}},{key:"stopCollector",value:function(e){l.click===e&&document.removeEventListener("click",this.listeners[l.click])}},{key:"stopAllCollector",value:function(){this.types.forEach(this.stopCollector)}}]),r}();E.COLLECT_EVENT_NAME="collector:collect";var S=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var k=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.tracks=e||[],t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),S(n,[{key:"save",value:function(e){this.tracks.push(e)}},{key:"getAll",value:function(){return this.tracks.splice(0)}}]),n}();var A=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.storage=new k,t.addEventListener(n.SAVE_EVENT_NAME,function(e){t.storage.save(e.track)}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n}();A.SAVE_EVENT_NAME="storage:save";var T=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r(),this.st=new Date,this.event=t,this.user=n},P=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=window;this.uuid=r(),this.userAgent=t.navigator.userAgent||""};e.watch=function(e){var t=new E(e),n=new A;return t.addEventListener(E.COLLECT_EVENT_NAME,function(e){var t=new T(e.event,P);n.emit(A.SAVE_EVENT_NAME,{track:t})}),{collector:t,storage:n}},e.Collector=E,e.Storage=A,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=trackgo.js.map
